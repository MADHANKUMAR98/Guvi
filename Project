-- Create EBS_Login_Table
CREATE TABLE EBS_Login_Table (
    Login_Id VARCHAR(20) PRIMARY KEY,
    User_Id VARCHAR(20) NOT NULL,
    Password VARCHAR(50) NOT NULL,
    User_Role VARCHAR(10) CHECK (User_Role IN ('Admin', 'Customer')),
    FOREIGN KEY (User_Id) REFERENCES EBS_User_Table(User_Id)
);

-- Create EBS_User_Table
CREATE TABLE EBS_User_Table (
    User_Id VARCHAR(20) PRIMARY KEY,
    User_Name VARCHAR(50) NOT NULL,
    Address_Id VARCHAR(20) NOT NULL,
    Phone_Number VARCHAR(15) NOT NULL,
    Meter_Id INT NOT NULL,
    Email_Address VARCHAR(50) UNIQUE NOT NULL
);

-- Create EBS_Address_Table
CREATE TABLE EBS_Address_Table (
    Address_Id VARCHAR(20) PRIMARY KEY,
    House_Number VARCHAR(20) NOT NULL,
    Street_Name VARCHAR(50) NOT NULL,
    Area_Name VARCHAR(50),
    City_Name VARCHAR(50) NOT NULL,
    State_Name VARCHAR(50) NOT NULL,
    Pin_Code VARCHAR(10) NOT NULL
);

-- Create EBS_Meter_Status_Table
CREATE TABLE EBS_Meter_Status_Table (
    Meter_Status_Id INT PRIMARY KEY,
    Meter_Status_Description VARCHAR(50) NOT NULL
);

-- Create EBS_Meter_Table
CREATE TABLE EBS_Meter_Table (
    Meter_Id INT PRIMARY KEY,
    Meter_Number VARCHAR(20) NOT NULL UNIQUE,
    Meter_Status_Id INT NOT NULL,
    FOREIGN KEY (Meter_Status_Id) REFERENCES EBS_Meter_Status_Table(Meter_Status_Id)
);

-- Create EBS_Usage_Table
CREATE TABLE EBS_Usage_Table (
    Usage_Id VARCHAR(20) PRIMARY KEY,
    User_Id VARCHAR(20) NOT NULL,
    Month VARCHAR(20) NOT NULL,
    Usage_Reading INT NOT NULL,
    Admin_Id VARCHAR(20) NOT NULL,
    Usage_Created_At TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (User_Id) REFERENCES EBS_User_Table(User_Id),
    FOREIGN KEY (Admin_Id) REFERENCES EBS_User_Table(User_Id)
);

-- Create EBS_Billing_Table
CREATE TABLE EBS_Billing_Table (
    Bill_Id VARCHAR(20) PRIMARY KEY,
    Usage_Id VARCHAR(20) NOT NULL,
    Amount DECIMAL(10, 2) NOT NULL,
    Bill_Created_Timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (Usage_Id) REFERENCES EBS_Usage_Table(Usage_Id)
);

-- Create EBS_Payment_Method_Table
CREATE TABLE EBS_Payment_Method_Table (
    Payment_Method_Id INT PRIMARY KEY,
    Payment_Method_Description VARCHAR(50) NOT NULL
);

-- Create EBS_Payment_Table
CREATE TABLE EBS_Payment_Table (
    Payment_Id VARCHAR(20) PRIMARY KEY,
    Bill_Id VARCHAR(20) NOT NULL,
    Payment_Method_Id INT NOT NULL,
    Payment_Made_At TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (Bill_Id) REFERENCES EBS_Billing_Table(Bill_Id),
    FOREIGN KEY (Payment_Method_Id) REFERENCES EBS_Payment_Method_Table(Payment_Method_Id)
);
