CREATE TABLE Meter_Table (
    Meter_Id INT PRIMARY KEY,
    Meter_Number VARCHAR2(20) NOT NULL,
    Meter_Status_Id INT,
    FOREIGN KEY (Meter_Status_Id) REFERENCES Meter_Status_Table(Meter_Status_Id)
);
CREATE TABLE User_Table (
    User_Id VARCHAR2(10) PRIMARY KEY,
    User_Name VARCHAR2(20) NOT NULL,
    Address_Id VARCHAR2(10),
    Phone_Number INT,
    Email_Address VARCHAR2(30),
    Account_Created_TimeStamp DATETIME,
    Meter_Id INT,  -- Adding Meter_Id to the User_Table
    FOREIGN KEY (Meter_Id) REFERENCES Meter_Table(Meter_Id)  -- Establishing the foreign key relationship
);
-- Create Meter Status Table First
CREATE TABLE Meter_Status_Table (
    Meter_Status_Id INT PRIMARY KEY,
    Meter_Status_Description VARCHAR2(20) NOT NULL
);

-- Create Meter Table Next
CREATE TABLE Meter_Table (
    Meter_Id INT PRIMARY KEY,
    Meter_Number VARCHAR2(20) NOT NULL,
    Meter_Status_Id INT,
    FOREIGN KEY (Meter_Status_Id) REFERENCES Meter_Status_Table(Meter_Status_Id)
);

-- Finally, Create User Table with Meter_Id Reference
CREATE TABLE User_Table (
    User_Id VARCHAR2(10) PRIMARY KEY,
    User_Name VARCHAR2(20) NOT NULL,
    Address_Id VARCHAR2(10),
    Phone_Number INT,
    Email_Address VARCHAR2(30),
    Account_Created_TimeStamp DATETIME,
    Meter_Id INT,  -- Meter_Id column added
    FOREIGN KEY (Meter_Id) REFERENCES Meter_Table(Meter_Id)  -- Foreign key reference to Meter_Table
);
INSERT INTO Meter_Table (Meter_Id, Meter_Number, Meter_Status_Id) 
VALUES (1, 'MT-1001', 1);
INSERT INTO User_Table (User_Id, User_Name, Address_Id, Phone_Number, Email_Address, Account_Created_TimeStamp, Meter_Id) 
VALUES ('U123', 'John Doe', 'A001', 1234567890, 'john.doe@example.com', CURRENT_TIMESTAMP, 1);
SELECT u.User_Id, u.User_Name, m.Meter_Number 
FROM User_Table u
JOIN Meter_Table m ON u.Meter_Id = m.Meter_Id;
